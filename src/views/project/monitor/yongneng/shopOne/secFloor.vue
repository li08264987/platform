<template>
  <div>
    <infoScan ref="infoScan" :code="code" />
    <lineScan
      ref="lineScan"
      :code="linecode"
    />
    <svg width="1817px" height="842px" viewBox="0 0 1817 842" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <title>一车间二层</title>
      <g id="工艺图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="监测管理_一栋车间_车间二层" transform="translate(-211.000000, -200.000000)">
          <g id="一车间二层" transform="translate(211.000000, 200.000000)">
            <g id="一栋二层" transform="translate(43.000000, 99.000000)">
              <path id="合并形状" d="M1019.5,0.5 L0.5,0.5 L0.5,552.5 L1557.5,552.5 L1557.5,253.499999 L1019.5,253.498999 L1019.5,0.5 Z" stroke="#E1E3E9" />
              <rect id="矩形" stroke="#C5CAD5" fill="#F9F9FB" x="927.5" y="80.5" width="48" height="382" />
              <rect id="矩形-copy-40" stroke="#C5CAD5" fill="#F9F9FB" x="20.5" y="80.5" width="48" height="386" rx="1" />
              <path id="矩形-copy-42" d="M286,-148.5 L248.5,-148 L249,229.5 L286.5,229 L286,-148.5 Z" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(267.500000, 40.500000) rotate(-90.000000) translate(-267.500000, -40.500000) " />
              <path id="矩形-copy-52" d="M291,318.5 L243.5,319 L244,696.5 L291.5,696 L291,318.5 Z" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(267.500000, 507.500000) rotate(-90.000000) translate(-267.500000, -507.500000) " />
              <rect id="矩形-copy-43" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(742.000000, 40.500000) rotate(-90.000000) translate(-742.000000, -40.500000) " x="723" y="-128" width="38" height="337" />
              <rect id="矩形-copy-50" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(742.000000, 119.000000) rotate(-90.000000) translate(-742.000000, -119.000000) " x="695.5" y="-49.5" width="93" height="337" />
              <rect id="矩形-copy-51" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(742.000000, 225.000000) rotate(-90.000000) translate(-742.000000, -225.000000) " x="695.5" y="56.5" width="93" height="337" />
              <rect id="矩形-copy-44" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(511.500000, 157.500000) rotate(-90.000000) translate(-511.500000, -157.500000) " x="424.5" y="120.5" width="174" height="74" />
              <path id="矩形-copy-46" d="M309.25,-73.75 L226.25,-73.75 L226.25,304.75 L309.25,304.75 L309.25,-73.75 Z" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(267.750000, 115.500000) rotate(-90.000000) translate(-267.750000, -115.500000) " />
              <path id="矩形-copy-47" d="M309.25,25.25 L226.25,25.25 L226.25,403.75 L309.25,403.75 L309.25,25.25 Z" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(267.750000, 214.500000) rotate(-90.000000) translate(-267.750000, -214.500000) " />
              <path id="矩形-copy-48" d="M309.25,122.25 L226.25,122.25 L226.25,500.75 L309.25,500.75 L309.25,122.25 Z" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(267.750000, 311.500000) rotate(-90.000000) translate(-267.750000, -311.500000) " />
              <path id="矩形-copy-49" d="M318.25,229.25 L217.25,229.25 L217.25,607.75 L318.25,607.75 L318.25,229.25 Z" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(267.750000, 418.500000) rotate(-90.000000) translate(-267.750000, -418.500000) " />
              <rect id="矩形-copy-45" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(512.000000, 365.500000) rotate(-90.000000) translate(-512.000000, -365.500000) " x="414.5" y="328.5" width="195" height="74" />
              <path id="矩形-copy-31" d="M1403.5,151.5 L1156.5,151.5 L1156.5,664.5 L1403.5,664.5 L1403.5,151.5 Z" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(1280.000000, 408.000000) rotate(-90.000000) translate(-1280.000000, -408.000000) " />
              <rect id="矩形-copy-32" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(797.000000, 390.500000) rotate(-90.000000) translate(-797.000000, -390.500000) " x="691.5" y="294.5" width="211" height="192" />
              <rect id="矩形-copy-39" stroke="#C5CAD5" fill="#F9F9FB" transform="translate(630.000000, 390.000000) rotate(-90.000000) translate(-630.000000, -390.000000) " x="524.5" y="333.5" width="211" height="113" rx="1" />
              <text id="自动化车间" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1251" y="409">自动化车间</tspan>
              </text>
              <text id="分光站/固晶站" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="697" y="125">分光站/固晶站</tspan>
              </text>
              <text id="成品仓" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="491" y="166">成品仓</tspan>
              </text>
              <text id="物料仓" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="491" y="374">物料仓</tspan>
              </text>
              <text id="分光站/固晶站-copy" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="215" y="131">分光站/固晶站</tspan>
              </text>
              <text id="分光站/固晶站-copy-2" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="215" y="425">分光站/固晶站</tspan>
              </text>
              <text id="编带站/焊线站" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="697" y="228">编带站/焊线站</tspan>
              </text>
              <text id="编带站/焊线站-copy" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="215" y="226">编带站/焊线站</tspan>
              </text>
              <text id="编带站/焊线站-copy-2" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="215" y="321">编带站/焊线站</tspan>
              </text>
              <text id="编带站/分光站" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="585" y="399">编带站/分光站</tspan>
              </text>
            </g>
            <g id="数据">
              <g id="1#流量计">
                <rect id="矩形" stroke="#4A62F5" fill-opacity="0.9" fill="#4A62F5" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#3451FF" x="0" y="0" width="3" height="56" />
                <text id="1#空压流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">1#空压流量</tspan>
                </text>
                <text id="ky_yncj_cj1_lc2_llj1_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="46">{{ datas.ky_yncj_cj1_lc2_llj1_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="3#流量计" transform="translate(0.000000, 670.000000)">
                <rect id="矩形" stroke="#4A62F5" fill-opacity="0.9" fill="#4A62F5" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#3451FF" x="0" y="0" width="3" height="56" />
                <text id="3#空压流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">3#空压流量</tspan>
                </text>
                <text id="ky_yncj_cj1_lc2_llj1_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="46">{{ datas.ky_yncj_cj1_lc2_llj3_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="4#流量计" transform="translate(1527.000000, 670.000000)">
                <rect id="矩形" stroke="#4A62F5" fill-opacity="0.9" fill="#4A62F5" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#3451FF" x="0" y="0" width="3" height="56" />
                <text id="4#空压流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">4#空压流量</tspan>
                </text>
                <text id="ky_yncj_cj1_lc2_llj1_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="46">{{ datas.ky_yncj_cj1_lc2_llj4_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="1#流量计" transform="translate(0.000000, 58.000000)">
                <rect id="矩形" stroke="#4A62F5" fill-opacity="0.9" fill="#4A62F5" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#3451FF" x="0" y="0" width="3" height="56" />
                <text id="1#氢氮流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">1#氢氮流量</tspan>
                </text>
                <text id="qd_yncj_cj1_lc2_llj1_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="46">{{ datas.qd_yncj_cj1_lc2_llj1_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="3#流量计" transform="translate(0.000000, 728.000000)">
                <rect id="矩形" stroke="#4A62F5" fill-opacity="0.9" fill="#4A62F5" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#3451FF" x="0" y="0" width="3" height="56" />
                <text id="3#氢氮流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">3#氢氮流量</tspan>
                </text>
                <text id="qd_yncj_cj1_lc2_llj3_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="46">{{ datas.qd_yncj_cj1_lc2_llj3_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="4#流量计" transform="translate(1527.000000, 728.000000)">
                <rect id="矩形" stroke="#4A62F5" fill-opacity="0.9" fill="#4A62F5" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#3451FF" x="0" y="0" width="3" height="56" />
                <text id="4#氢氮流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">4#氢氮流量</tspan>
                </text>
                <text id="qd_yncj_cj1_lc2_llj3_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="46">{{ datas.qd_yncj_cj1_lc2_llj4_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="2#流量计" transform="translate(1527.000000, 58.000000)">
                <rect id="矩形" stroke="#4A62F5" fill-opacity="0.9" fill="#4A62F5" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#3451FF" x="0" y="0" width="3" height="56" />
                <text id="2#氢氮流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">2#氢氮流量</tspan>
                </text>
                <text id="qd_yncj_cj1_lc2_llj1_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="46">{{ datas.qd_yncj_cj1_lc2_llj2_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="1#真空计" transform="translate(0.000000, 116.000000)">
                <g id="分组-8">
                  <rect id="矩形-copy-5" stroke="#FC5337" fill-opacity="0.9" fill="#FC5337" x="0.5" y="0.5" width="140" height="55" />
                  <rect id="矩形-copy-12" fill="#F84527" x="0" y="0" width="3" height="56" />
                  <text id="高压真空度" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                    <tspan x="9" y="23">高压真空度</tspan>
                  </text>
                  <text id="zk_yncj_cj1_lngy1_zkj1_zkd" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                    <tspan x="9" y="44">{{ datas.zk_yncj_cj1_lngy1_zkj1_zkd }}kpa</tspan>
                  </text>
                </g>
              </g>
              <g id="1区" transform="translate(0.000000, 174.000000)">
                <rect id="矩形-copy-5" stroke="#FA8200" fill-opacity="0.9" fill="#FA8200" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#FF7600" x="0" y="0" width="3" height="56" />
                <text id="1区瞬时功率" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">1区瞬时功率</tspan>
                </text>
                <text id="dl_ynch_cj1_lc2_qy1_ssgl" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="44">{{ datas.dl_ynch_cj1_lc2_qy1_ssgl }}kw</tspan>
                </text>
              </g>
              <g id="3区" transform="translate(0.000000, 786.000000)">
                <rect id="矩形-copy-5" stroke="#FA8200" fill-opacity="0.9" fill="#FA8200" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#FF7600" x="0" y="0" width="3" height="56" />
                <text id="3区瞬时功率" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">3区瞬时功率</tspan>
                </text>
                <text id="dl_ynch_cj1_lc2_qy3_ssgl" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="44">{{ datas.dl_ynch_cj1_lc2_qy3_ssgl }}kw</tspan>
                </text>
              </g>
              <g id="4区" transform="translate(1527.000000, 786.000000)">
                <rect id="矩形-copy-5" stroke="#FA8200" fill-opacity="0.9" fill="#FA8200" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#FF7600" x="0" y="0" width="3" height="56" />
                <text id="4区瞬时功率" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">4区瞬时功率</tspan>
                </text>
                <text id="dl_ynch_cj1_lc2_qy4_ssgl" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="44">{{ datas.dl_ynch_cj1_lc2_qy4_ssgl }}kw</tspan>
                </text>
              </g>
              <g id="2#流量计" transform="translate(1527.000000, 0.000000)">
                <rect id="矩形" stroke="#4A62F5" fill-opacity="0.9" fill="#4A62F5" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#3451FF" x="0" y="0" width="3" height="56" />
                <text id="2#空压流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">2#空压流量</tspan>
                </text>
                <text id="ky_yncj_cj1_lc2_llj2_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="46">{{ datas.ky_yncj_cj1_lc2_llj2_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="1#真空计" transform="translate(1527.000000, 116.000000)">
                <rect id="矩形-copy-5" stroke="#FC5337" fill-opacity="0.9" fill="#FC5337" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#F84527" x="0" y="0" width="3" height="56" />
                <text id="低压真空度" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">低压真空度</tspan>
                </text>
                <text id="zk_yncj_cj1_lncy1_zkj1_zkd" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="44">{{ datas.zk_yncj_cj1_lncy1_zkj1_zkd }}kpa</tspan>
                </text>
              </g>
              <g id="2区" transform="translate(1527.000000, 174.000000)">
                <rect id="矩形-copy-5" stroke="#FA8200" fill-opacity="0.9" fill="#FA8200" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#FF7600" x="0" y="0" width="3" height="56" />
                <text id="2区瞬时功率" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#FFFFFF">
                  <tspan x="9" y="23">2区瞬时功率</tspan>
                </text>
                <text id="dl_ynch_cj1_lc2_qy2_ssgl" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#FFFFFF">
                  <tspan x="9" y="44">{{ datas.dl_ynch_cj1_lc2_qy2_ssgl }}kw</tspan>
                </text>
              </g>
            </g>
          </g>
        </g>
      </g>
    </svg>
  </div>
</template>
<script>
import infoScan from '@/views/project/monitor/infoScan'
import lineScan from '@/views/project/monitor/lineScan'
import monitorapi from '@/api/monitor/monitor'
import $ from 'jquery'
import '@/api/monitor/svgtool'
export default {
  name: 'System',
  components: {
    infoScan,
    lineScan
  },
  data() {
    return {
      datas: {
      },
      code: '',
      linecode: ''
    }
  },
  mounted() {
    $('svg').svgPanZoom()
    const self = this
    monitorapi.getShopFloorData({
      'shop': 'cj1',
      'floor': 'lc2'
    }).then(res => {
      if (res.state === 1) {
        self.datas = res.data
      }
    }).catch(err => {
      console.log(err)
    })
    $('svg').click(function(e) {
      var linecode = (e.target.parentElement.attributes.id && e.target.parentElement.attributes.id.value) || (e.target.attributes.id && e.target.attributes.id.value)
      self.linecode = linecode
      if (linecode &&
          (linecode.indexOf('_yncj_') !== -1 || linecode.indexOf('_ynch_') !== -1) && linecode.indexOf('_yxzt') === -1 &&
          linecode.indexOf('_yxzt') === -1 &&
          linecode.indexOf('_kyjzt') === -1 &&
          linecode.indexOf('_yxsj') === -1) {
        self.$refs.lineScan.dialogTableVisible = true
      }
    })
  },
  methods: {
    showInfo(e) {
      this.code = e.currentTarget.attributes.code.value
      this.$refs.infoScan.dialogTableVisible = true
    },
    showLine(e) {
      this.linecode = e.currentTarget.attributes.code.value
      this.$refs.lineScan.dialogTableVisible = true
    },
    getGuZhang(type) {
      return monitorapi.getGuZhang(type)
    },
    getGuZhangGif(val1, val2) {
      return monitorapi.getGuZhangGif(val1, val2)
    },
    getGuZhangColor(val1, val2) {
      return monitorapi.getGuZhangColor(val1, val2)
    }
  }
}
</script>
<style scoped lang="scss">
</style>
