<template>
  <div>
    <infoScan ref="infoScan" :code="code" />
    <lineScan
      ref="lineScan"
      :code="linecode"
    />
    <svg width="1719px" height="842px" viewBox="0 0 1719 842" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <!-- Generator: Sketch 54.1 (76490) - https://sketchapp.com -->
      <title>四栋2层</title>
      <desc>Created with Sketch.</desc>
      <g id="工艺图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="监测管理_四栋车间_二层" transform="translate(-201.000000, -190.000000)">
          <g id="四栋2层" transform="translate(201.000000, 190.000000)">
            <g id="四栋二层" transform="translate(19.000000, 20.000000)">
              <rect id="矩形-copy-4复制-423" stroke="#C5CAD5" fill="#F9F9FB" x="0.5" y="78.5" width="91" height="207" />
              <text id="办公区" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="25" y="190">办公区</tspan>
              </text>
              <rect id="矩形-copy-4复制-424" stroke="#C5CAD5" fill="#F9F9FB" x="0.5" y="285.5" width="79" height="43" />
              <rect id="矩形-copy-4复制-434" stroke="#C5CAD5" fill="#F9F9FB" x="748.5" y="0.5" width="79" height="35" />
              <rect id="矩形-copy-4复制-435" stroke="#C5CAD5" fill="#F9F9FB" x="827.5" y="0.5" width="81" height="35" />
              <rect id="矩形-copy-4复制-438" stroke="#C5CAD5" fill="#F9F9FB" x="1565.5" y="0.5" width="81" height="35" />
              <rect id="矩形-copy-4复制-439" stroke="#C5CAD5" fill="#F9F9FB" x="1565.5" y="90.5" width="81" height="639" />
              <rect id="矩形-copy-4复制-436" stroke="#C5CAD5" fill="#F9F9FB" x="908.5" y="0.5" width="271" height="35" />
              <rect id="矩形-copy-4复制-437" stroke="#C5CAD5" fill="#F9F9FB" x="1235.5" y="0.5" width="305" height="35" />
              <rect id="矩形-copy-4复制-433" stroke="#C5CAD5" fill="#F9F9FB" x="105.5" y="0.5" width="552" height="35" />
              <rect id="矩形-copy-4复制-426" stroke="#C5CAD5" fill="#F9F9FB" x="0.5" y="489.5" width="79" height="43" />
              <rect id="矩形-copy-4复制-440" stroke="#C5CAD5" fill="#F9F9FB" x="739.5" y="783.5" width="85" height="37" />
              <rect id="矩形-copy-4复制-441" stroke="#C5CAD5" fill="#F9F9FB" x="824.5" y="783.5" width="83" height="37" />
              <rect id="矩形-copy-4复制-444" stroke="#C5CAD5" fill="#F9F9FB" x="1563.5" y="783.5" width="83" height="37" />
              <rect id="矩形-copy-4复制-442" stroke="#C5CAD5" fill="#F9F9FB" x="907.5" y="783.5" width="83" height="37" />
              <rect id="矩形-copy-4复制-443" stroke="#C5CAD5" fill="#F9F9FB" x="1063.5" y="783.5" width="477" height="37" />
              <rect id="矩形-copy-4复制-425" stroke="#C5CAD5" fill="#F9F9FB" x="0.5" y="359.5" width="79" height="99" />
              <rect id="矩形-copy-4复制-427" stroke="#C5CAD5" fill="#F9F9FB" x="0.5" y="532.5" width="79" height="207" />
              <rect id="矩形-copy-4复制-428" stroke="#C5CAD5" fill="#F9F9FB" x="124.5" y="402.5" width="249" height="359" />
              <rect id="矩形-copy-4复制-430" stroke="#C5CAD5" fill="#F9F9FB" x="124.5" y="56.5" width="249" height="317" />
              <path id="形状结合" d="M635.5,56.5 L386.5,56.5 L386.5,373.5 L800.5,373.5 L800.5,101.5 L635.5,101.5 L635.5,56.5 Z" stroke="#C5CAD5" fill="#F9F9FB" />
              <rect id="矩形-copy-4复制-429" stroke="#C5CAD5" fill="#F9F9FB" x="386.5" y="402.5" width="415" height="359" />
              <path id="形状结合" d="M852.5,98.5 L852.5,373.5 L1267.5,373.5 L1267.5,56.5 L932.5,56.5 L932.5,98.5 L852.5,98.5 Z" stroke="#C5CAD5" fill="#F9F9FB" />
              <text id="楼梯复制-78" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="26" y="315">楼梯</tspan>
              </text>
              <text id="楼梯复制-80" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="774" y="26">楼梯</tspan>
              </text>
              <text id="楼梯复制-81" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="853" y="26">楼梯</tspan>
              </text>
              <text id="楼梯复制-82" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1591" y="26">楼梯</tspan>
              </text>
              <text id="办公区" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1585" y="418">办公区</tspan>
              </text>
              <text id="备用房" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1023" y="26">备用房</tspan>
              </text>
              <text id="分选机551台" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1021" y="223">分选机551台</tspan>
              </text>
              <text id="衣帽间" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1367" y="26">衣帽间</tspan>
              </text>
              <text id="衣帽间" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="361" y="26">衣帽间</tspan>
              </text>
              <text id="楼梯复制-79" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="26" y="519">楼梯</tspan>
              </text>
              <text id="楼梯复制-83" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="768" y="810">楼梯</tspan>
              </text>
              <text id="楼梯复制-84" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="852" y="810">楼梯</tspan>
              </text>
              <text id="楼梯复制-85" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1591" y="810">楼梯</tspan>
              </text>
              <text id="备用房" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="928" y="810">备用房</tspan>
              </text>
              <text id="衣帽间" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1281" y="810">衣帽间</tspan>
              </text>
              <text id="办公区" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="19" y="417">办公区</tspan>
              </text>
              <text id="办公区复制-2" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="19" y="644">办公区</tspan>
              </text>
              <text id="点测机570台" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="210" y="590">点测机570台</tspan>
              </text>
              <text id="点测机495台" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="210" y="232">点测机495台</tspan>
              </text>
              <text id="分选机535台" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="554" y="223">分选机535台</tspan>
              </text>
              <text id="分选机614台" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="555" y="590">分选机614台</tspan>
              </text>
              <rect id="矩形-copy-4复制-447" stroke="#C5CAD5" fill="#F9F9FB" x="1284.5" y="56.5" width="239" height="153" />
              <rect id="矩形-copy-4复制-448" stroke="#C5CAD5" fill="#F9F9FB" x="1284.5" y="238.5" width="239" height="135" />
              <rect id="矩形-copy-4复制-452" stroke="#C5CAD5" fill="#F9F9FB" x="1284.5" y="402.5" width="239" height="169" />
              <rect id="矩形-copy-4复制-453" stroke="#C5CAD5" fill="#F9F9FB" x="1284.5" y="596.5" width="239" height="162" />
              <rect id="矩形-copy-4复制-449" stroke="#C5CAD5" fill="#F9F9FB" x="848.5" y="402.5" width="419" height="169" />
              <path id="形状结合" d="M1259.5,596.5 L848.5,596.5 L848.5,716.5 L1090.5,716.5 L1090.5,758.5 L1259.5,758.5 L1259.5,596.5 Z" stroke="#C5CAD5" fill="#F9F9FB" />
              <text id="点测机495台" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1365" y="141">点测机495台</tspan>
              </text>
              <text id="点测机495台复制" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1365" y="314">点测机495台</tspan>
              </text>
              <text id="点测机570台" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1365" y="495">点测机570台</tspan>
              </text>
              <text id="点测机570台复制" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1365" y="686">点测机570台</tspan>
              </text>
              <text id="分选机582台" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1019" y="495">分选机582台</tspan>
              </text>
              <text id="分选机582台复制" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="14" font-weight="normal" line-spacing="14" letter-spacing="-0.0875" fill="#666C83">
                <tspan x="1015" y="686">分选机582台</tspan>
              </text>
            </g>
            <g id="数据">
              <g id="1#流量计">
                <rect id="矩形" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#4A62F5" x="0" y="0" width="3" height="56" />
                <text id="1#空压流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                  <tspan x="9" y="23">1#空压流量</tspan>
                </text>
                <text id="ky_yncj_cj4_lc2_llj1_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#333333">
                  <tspan x="9" y="46">{{ datas.ky_yncj_cj4_lc2_llj1_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="3#流量计" transform="translate(0.000000, 728.000000)">
                <rect id="矩形" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#4A62F5" x="0" y="0" width="3" height="56" />
                <text id="3#空压流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                  <tspan x="9" y="23">3#空压流量</tspan>
                </text>
                <text id="ky_yncj_cj3_lc2_llj3_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#333333">
                  <tspan x="9" y="46">{{ datas.ky_yncj_cj4_lc2_llj3_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="4#流量计" transform="translate(1527.000000, 728.000000)">
                <rect id="矩形" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#4A62F5" x="0" y="0" width="3" height="56" />
                <text id="4#空压流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                  <tspan x="9" y="23">4#空压流量</tspan>
                </text>
                <text id="ky_yncj_cj4_lc2_llj4_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#333333">
                  <tspan x="9" y="46">{{ datas.ky_yncj_cj4_lc2_llj4_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="1#真空计" transform="translate(0.000000, 58.000000)">
                <g id="分组-8">
                  <rect id="矩形-copy-5" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                  <rect id="矩形-copy-12" fill="#FC5337" x="0" y="0" width="3" height="56" />
                  <text id="真空度" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                    <tspan x="9" y="23">真空度</tspan>
                  </text>
                  <text id="zk_yncj_cj4_lncy1_zkj1_zkd" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#27282B">
                    <tspan x="9" y="44">{{ datas.zk_yncj_cj4_lncy1_zkj1_zkd }}kPa</tspan>
                  </text>
                </g>
              </g>
              <g id="1区" transform="translate(0.000000, 116.000000)">
                <rect id="矩形-copy-5" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#FAC400" x="0" y="0" width="3" height="56" />
                <text id="1区瞬时功率" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                  <tspan x="9" y="23">1区瞬时功率</tspan>
                </text>
                <text id="dl_ynch_cj4_lc2_qy1_ssgl" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#27282B">
                  <tspan x="9" y="44">{{ datas.dl_ynch_cj4_lc2_qy1_ssgl }}kw</tspan>
                </text>
              </g>
              <g id="3区" transform="translate(0.000000, 786.000000)">
                <rect id="矩形-copy-5" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#FAC400" x="0" y="0" width="3" height="56" />
                <text id="3区瞬时功率" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                  <tspan x="9" y="23">3区瞬时功率</tspan>
                </text>
                <text id="dl_ynch_cj4_lc2_qy3_ssgl" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#27282B">
                  <tspan x="9" y="44">{{ datas.dl_ynch_cj4_lc2_qy3_ssgl }}kw</tspan>
                </text>
              </g>
              <g id="4区" transform="translate(1527.000000, 786.000000)">
                <rect id="矩形-copy-5" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#FAC400" x="0" y="0" width="3" height="56" />
                <text id="4区瞬时功率" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                  <tspan x="9" y="23">4区瞬时功率</tspan>
                </text>
                <text id="dl_ynch_cj4_lc2_qy4_ssgl" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#27282B">
                  <tspan x="9" y="44">{{ datas.dl_ynch_cj4_lc2_qy4_ssgl }}kw</tspan>
                </text>
              </g>
              <g id="2#流量计" transform="translate(1527.000000, 0.000000)">
                <rect id="矩形" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-3" fill="#4A62F5" x="0" y="0" width="3" height="56" />
                <text id="2#空压流量" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                  <tspan x="9" y="23">2#空压流量</tspan>
                </text>
                <text id="ky_yncj_cj4_lc2_llj2_ssll" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#27282B">
                  <tspan x="9" y="46">{{ datas.ky_yncj_cj4_lc2_llj2_ssll }}m³/h</tspan>
                </text>
              </g>
              <g id="2区" transform="translate(1527.000000, 58.000000)">
                <rect id="矩形-copy-5" stroke="#E4E9F0" fill="#FFFFFF" opacity="0.9" x="0.5" y="0.5" width="140" height="55" />
                <rect id="矩形-copy-12" fill="#FAC400" x="0" y="0" width="3" height="56" />
                <text id="2区瞬时功率" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="12" font-weight="normal" line-spacing="12" fill="#3D5278">
                  <tspan x="9" y="23">2区瞬时功率</tspan>
                </text>
                <text id="dl_ynch_cj4_lc2_qy2_ssgl" font-family="MicrosoftYaHeiUI, Microsoft YaHei UI" font-size="16" font-weight="normal" line-spacing="16" fill="#27282B">
                  <tspan x="9" y="44">{{ datas.dl_ynch_cj4_lc2_qy2_ssgl }}kw</tspan>
                </text>
              </g>
            </g>
          </g>
        </g>
      </g>
    </svg>
  </div>
</template>
<script>
import infoScan from '@/views/project/monitor/infoScan'
import lineScan from '@/views/project/monitor/lineScan'
import monitorapi from '@/api/monitor/monitor'
import $ from 'jquery'
import '@/api/monitor/svgtool'
export default {
  name: 'System',
  components: {
    infoScan,
    lineScan
  },
  data() {
    return {
      datas: {
      },
      code: '',
      linecode: ''
    }
  },
  mounted() {
    $('svg').svgPanZoom()
    const self = this
    monitorapi.getShopFloorData({
      'shop': 'cj4',
      'floor': 'lc2'
    }).then(res => {
      if (res.state === 1) {
        self.datas = res.data
      }
    }).catch(err => {
      console.log(err)
    })
    $('svg').click(function(e) {
      var linecode = (e.target.parentElement.attributes.id && e.target.parentElement.attributes.id.value) || (e.target.attributes.id && e.target.attributes.id.value)
      self.linecode = linecode
      if (linecode &&
          (linecode.indexOf('_yncj_') !== -1 || linecode.indexOf('_ynch_') !== -1) && linecode.indexOf('_yxzt') === -1 &&
          linecode.indexOf('_yxzt') === -1 &&
          linecode.indexOf('_kyjzt') === -1 &&
          linecode.indexOf('_yxsj') === -1) {
        self.$refs.lineScan.dialogTableVisible = true
      }
    })
  },
  methods: {
    showInfo(e) {
      this.code = e.currentTarget.attributes.code.value
      this.$refs.infoScan.dialogTableVisible = true
    },
    showLine(e) {
      this.linecode = e.currentTarget.attributes.code.value
      this.$refs.lineScan.dialogTableVisible = true
    },
    getGuZhang(type) {
      return monitorapi.getGuZhang(type)
    },
    getGuZhangGif(val1, val2) {
      return monitorapi.getGuZhangGif(val1, val2)
    },
    getGuZhangColor(val1, val2) {
      return monitorapi.getGuZhangColor(val1, val2)
    }
  }
}
</script>
<style scoped lang="scss">
</style>
